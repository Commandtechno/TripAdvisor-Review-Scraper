<!DOCTYPE html>
<html>
  <head>
    <title>{{.Title}}</title>
    <style>
      /* CSS Style for input field */
      input[type='text'] {
        border: 2px solid #ccc;
        border-radius: 4px;
        padding: 10px;
        font-size: 16px;
        width: 100%;
        box-sizing: border-box;
      }

      /* CSS Style for submit button */
      input[type='submit'] {
        background-color: #4caf50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        display: block;
        margin: 0 auto;
        width: 100%;
        max-width: 200px;
      }

      /* Center everything on the page */
      html,
      body {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
      }

      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      /* Style the table*/
      table {
        border-collapse: collapse;
        table-layout: auto;
        width: 100%;
      }

      td,
      th {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        word-wrap: break-word;
        white-space: pre-wrap;
      }

      /* First column */
      td:nth-child(1) {
        min-width: 230px;
        max-width: 230px;
      }

      th:nth-child(1) {
        min-width: 230px;
        max-width: 230px;
      }

      th:nth-child(3) {
        width: 50px;
      }
      td:nth-child(3) {
        width: 50px;
      }

      tr:nth-child(even) {
        background-color: #fcf3f3;
        word-wrap: break-word;
        white-space: pre-wrap;
      }

      tr:hover {
        background-color: grey;
        word-wrap: break-word;
        white-space: pre-wrap;
      }

      th {
        padding-top: 12px;
        padding-bottom: 12px;
        background-color: #04aa6d;
        color: white;
      }

      /* Flex box */

      .flex-container {
        display: flex;
        height: 100%;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        max-width: 1200px;
      }

      .form-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        background-color: #eee;
        margin-right: 50px;
      }

      .table-container {
        flex: 1;
        padding: 0px;
        flex-direction: column;
        box-sizing: border-box;
        background-color: #fff;
        word-wrap: break-word;
        white-space: pre-wrap;
        max-height: 80%;
        overflow-y: auto;
      }

      /* ... Other CSS ... */

      .centered-select {
        display: block; /* Ensure it takes the full width available to it */
        margin-left: auto; /* Automatically margin left */
        margin-right: auto; /* Automatically margin right */
        margin-bottom: 20px;
        border: 2px solid #ccc;
        border-radius: 4px;
        padding: 10px;
        font-size: 16px;
        width: 100%; /* Or you might set a max-width if you want it to be less than full width */
        max-width: 200px;
        box-sizing: border-box;
      }

      form {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
    </style>
    <script>
      if (window.performance.navigation.type === 2) {
        // reload the page if the user navigated back using the "Back" button
        location.reload();
      }
    </script>
  </head>
  <body>
    <div class="flex-container">
      <!-- Form -->
      <div class="form-container">
        <h2 style="text-align: center"
          >There is (are) currently
          <a href="/tasks">{{.RunningContainers}}</a> task(s) in the queue. Max
          5.</h2
        >
        <h4 style="text-align: center"
          >If the property / airline has too many pages, even with proxies, the
          scraper could get IP banned and your task(s) will disppear. Please
          report broken proxies via the support email. You can find the proxy
          location(s) of your task(s) on the <a href="/tasks">Tasks</a> page.
        </h4>

        <form action="/submit" method="post">
          <label for="url"><h3>Enter URL:</h3></label>

          <h4>*must be tripadvisor.com, not .fr or or others.*</h4>
          <input
            type="text"
            id="url"
            name="url"
            placeholder="https://www.tripadvisor.com/Hotel_Review-g188107-d11761198-Reviews-Hotel_des_Patients-Lausanne_Canton_of_Vaud.html"
            size="60"
            required
          />
          <br />
          <label for="upload_identifier"
            ><h3>Enter You Upload Identifier:</h3>
            <h5>*It's for you to find the file later</h5></label
          >
          <input
            type="text"
            id="upload_identifier"
            name="upload_identifier"
            placeholder="rocket_fox"
            size="60"
            maxlength="20"
            required
          />
          <br />
          <br />

          <!-- Adding dropdown menu -->
          <label for="choice"><h3>Select Target:</h3></label>
          <select id="choice" name="scrape_option" class="centered-select">
            <option value="HOTEL">HOTEL</option>
            <option value="RESTO">RESTAURANT</option>
            <option value="AIRLINE">AIRLINE</option>
          </select>
          <br />
          <br />

          <input type="submit" value="Submit" />
        </form>
        <br />

        <h2 style="text-align: center">
          For any bugs or issues, please contact me at:
          <a
            href="mailto:support@algo7.tools?subject=Scraper Bugs&body=Example Body"
            >support@algo7.tools</a
          >
        </h2>
        <h2 style="text-align: center">
          <a href="https://github.com/algo7/TripAdvisor-Review-Scraper"
            >Source Code</a
          >
        </h2>
      </div>

      <!-- Table -->
      <div class="table-container">
        <table>
          <h2>Files that are currently available:</h2>
          <thead>
            <tr>
              <th>File Name</th>
              <th>Upload ID</th>
              <th>Link</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            {{range .Rows}}
            <tr>
              <td>{{.FileName}}</td>
              <td>{{.UploadedBy}}</td>
              <td><a href="{{.Link}}">Link</a></td>
              <td>{{.Date}}</td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
